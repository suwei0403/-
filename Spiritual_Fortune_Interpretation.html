<!DOCTYPE html><html><head><meta charset='utf-8'><meta http-equiv='Access-Control-Allow-Headers' content='Origin, X-Requested-With, Content-Type, Accept'><meta http-equiv='Access-Control-Allow-Methods' content='GET,POST,PUT,DELETE,OPTIONS'><meta http-equiv='Access-Control-Allow-Origin' content='*'><meta http-equiv='Access-Control-Allow-Credentials' content='true'><script src='https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/GameElements_20190131/marked.min.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/GameElements_20190131/gameelements.js'></script><link rel='stylesheet' href='https://fustyles.github.io/webduino/SpBlocklyJS/css/icon_custom.css' /><script src='https://fustyles.github.io/webduino/SpBlocklyJS/TextToSpeech_20220729/texttospeech.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/SpeechRecognition_20220729/speechrecognition.js'></script><script src='https://fustyles.github.io/webduino/SpBlocklyJS/openAI_20221212/openAI.js'></script><script src='https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js'></script></head><body>
<script>
const delay = (seconds) => {
    return new Promise((resolve) => {
        setTimeout(resolve, seconds * 1000);
    });
};
const main = async () => {
    var _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC1, _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC2, LLM_E5_9B_9E_E6_87_89_E8_B3_87_E6_96_99, _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC1, _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC2, _E7_A5_9E_E6_98_8E_E5_9C_96_E6_A1_88, openAI_API_Key, _E8_A7_92_E8_89_B2_E6_89_AE_E6_BC_94, _E8_AA_9E_E9_9F_B3_E6_9C_97_E8_AE_80_E7_8B_80_E6_85_8B;

    function mathRandomInt(a, b) {
        if (a > b) {
            // Swap a and b to ensure a is smaller.
            var c = a;
            a = b;
            b = c;
        }
        return Math.floor(Math.random() * (b - a + 1) + a);
    }

    // 描述此函式...
    function _E7_B1_A4_E8_A9_A9_E7_94_9F_E5_9C_96() {
        LLM_E5_9B_9E_E6_87_89_E8_B3_87_E6_96_99 = (openai_chat_response_get('br'));
        openai_image_request(([LLM_E5_9B_9E_E6_87_89_E8_B3_87_E6_96_99, '先慢慢思考回應的文字,', '只能針對"籤詩對應的內容"產生山水風格的畫作'].join('')), "1024x1024");
    }

    // 描述此函式...
    function _E9_80_81_E5_87_BA_E5_B0_8D_E8_A9_B1() {
        div_set('', "innerHTML", ([fontText(3, '#cc0000', 'Arial', (textarea_get('', "value"))), '<br>', '<br>', div_get('', "innerHTML")].join('')));
        openai_chat_request((textarea_get('', "value")));
        textarea_set('', "value", '');
    }


    _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC1 = 'sk-proj--IJnLb9G42YbLsccvYGUrPPurJgfJwhLbaL71V5dqksy8LLp6nEF';
    _E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC2 = '_O7HHo79zj8ZpIbaxXoaRzT3BlbkFJ1Wi5rhEaPMu3jFqeiGzXBX6UOGAVa8snPQFrXZm9aeyEg1YzANLl38xySNFQWTQuExE8SJ2q8A';
    _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC1 = (CryptoJS.AES.encrypt(_E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC1, 'LLM1').toString());
    _E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC2 = (CryptoJS.AES.encrypt(_E5_8E_9F_E5_A7_8B_E5_AF_86_E7_A2_BC2, 'LLM2').toString());
    _E7_A5_9E_E6_98_8E_E5_9C_96_E6_A1_88 = ['https://suwei0403.github.io/Miracle-Temple-Carbon/琉璃菩薩.jpg', 'https://suwei0403.github.io/Miracle-Temple-Carbon/Q版媽祖.svg'];
    LLM_E5_9B_9E_E6_87_89_E8_B3_87_E6_96_99 = [];
    _E8_A7_92_E8_89_B2_E6_89_AE_E6_BC_94 = '';
    _E8_AA_9E_E9_9F_B3_E6_9C_97_E8_AE_80_E7_8B_80_E6_85_8B = false;
    _E8_A7_92_E8_89_B2_E6_89_AE_E6_BC_94 = ['你是一位佛道教神職人員,專門解答信眾的籤詩,且確實執行任務。', '任務1:信眾表達"求籤或抽籤"等相關字眼,則參考"https://suwei0403.github.io/Miracle-Temple-Carbon/六十甲子籤.txt"隨機一支靈籤。', '任務2:回傳的資料以逗號區隔,格式如下:"籤詩編號","籤詩","原故事背景","相關吉凶建議"。', '任務3:以標題搭配對應的內容,條列式敘述。', '任務4:執行任務1,任務2和任務3後,在進一步詢問信眾詢問方向,例如:事業或財運或婚姻或感情或健康或法律與是非或遺失物品等。'].join('');
    head_add_viewport(1, 1, 2, "yes");
    include_file("css", "", 'https://fustyles.github.io/webduino/GameElements_20190131/test_scroll.css');
    button_toolbox(10, 0, 63, 63, '#ffffff', '#ff6666', 50, 1, 5, [
        ['replay', '重設對話'],
        ['save', '儲存對話'],
        ['upload_file', '載入對話'],
        ['volume_off', '語音朗讀'],
        ['mic_off', '語音辨識'],
        ['wechat', '送出對話']
    ]);
    textarea_create('', 10, 75, 52, 3, '請輸入對話', 1, 999, true);
    async function textarea__keydown(event) {
        if (event.keyCode == 13) {
            _E9_80_81_E5_87_BA_E5_B0_8D_E8_A9_B1();
        }
    };
    document.getElementById('gametextarea_' + '').addEventListener("keydown", textarea__keydown, true);
    async function textarea__focus(event) {
        element_select("gametextarea_");
    };
    document.getElementById('gametextarea_' + '').addEventListener("focus", textarea__focus, true);
    ttsSetProperty(1, 1, 1, "cmn-Hant-TW");
    ttsSwitch(0);
    recognition.lang = "cmn-Hant-TW";
    Recognition_switch(1);
    SpeechRecognition_interim = document.getElementById("gametextarea_");
    Recognition_recognitionFinish = async function() {
        textarea_set('', "value", (Recognition_final_get()));
        console.log('');

    };
    div_create('', 410, 400, 0, 140, "ridge", 10, '#3333ff', '#ffffff', '#000000', 20, 1, '', 999, true);
    image_create('', 'https://suwei0403.github.io/Miracle-Temple-Carbon/Q版媽祖.svg', 200, 300, 450, 140, 999, true);
    div_set('', "class", 'container');
    openai_chat_initial((String(CryptoJS.AES.decrypt(_E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC1, 'LLM1').toString(CryptoJS.enc.Utf8)) + String(CryptoJS.AES.decrypt(_E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC2, 'LLM2').toString(CryptoJS.enc.Utf8))), _E8_A7_92_E8_89_B2_E6_89_AE_E6_BC_94, "gpt-4o");
    //籤詩生圖
    openai_image_initial((String(CryptoJS.AES.decrypt(_E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC1, 'LLM1').toString(CryptoJS.enc.Utf8)) + String(CryptoJS.AES.decrypt(_E5_8A_A0_E5_AF_86_E5_AF_86_E7_A2_BC2, 'LLM2').toString(CryptoJS.enc.Utf8))), "dall-e-3");
    openai_image_response = async function() {
        image_set('', "url", (openai_image_response_get()));

    };
    openai_chat_content_file_remote_insert('https://suwei0403.github.io/Miracle-Temple-Carbon/六十甲子籤.txt');
    openai_chat_response = async function() {
        div_set('', "innerHTML", ([fontText(3, '#33cc00', 'Arial', (openai_chat_response_get('br'))), '<br>', '<br>', div_get('', "innerHTML")].join('')));
        if (Recognition_state()) {
            Recognition_switch(0);
        }
        await ttsSpeak(("Microsoft Yating - Chinese (Traditional, Taiwan)"), (openai_chat_response_get('')));
        _E7_B1_A4_E8_A9_A9_E7_94_9F_E5_9C_96();

    };
    async function gamebutton_replay_onclick(event) {
        openai_chat_content_clear();
        div_set('', "innerHTML", '');
        textarea_set('', "value", '');
        image_set('', "url", (_E7_A5_9E_E6_98_8E_E5_9C_96_E6_A1_88[(mathRandomInt(1, 2) - 1)]));
    };
    document.getElementById("gamebutton_replay").addEventListener("click", gamebutton_replay_onclick, true);
    async function gamebutton_save_onclick(event) {
        openai_chat_content_file("save");
    };
    document.getElementById("gamebutton_save").addEventListener("click", gamebutton_save_onclick, true);
    async function gamebutton_upload_file_onclick(event) {
        div_set('', "innerHTML", '');
        openai_chat_content_file("open");
    };
    document.getElementById("gamebutton_upload_file").addEventListener("click", gamebutton_upload_file_onclick, true);
    async function gamebutton_volume_off_onclick(event) {
        if (_E8_AA_9E_E9_9F_B3_E6_9C_97_E8_AE_80_E7_8B_80_E6_85_8B) {
            ttsSwitch(0);
            icon_google("button", 'volume_off', 'volume_off');
            button_set('volume_off', "color", '#ffffff');
            ttsState("cancel");
        } else {
            ttsSwitch(1);
            icon_google("button", 'volume_off', 'volume_up');
            button_set('volume_off', "color", '#3366ff');
        }
        _E8_AA_9E_E9_9F_B3_E6_9C_97_E8_AE_80_E7_8B_80_E6_85_8B = !_E8_AA_9E_E9_9F_B3_E6_9C_97_E8_AE_80_E7_8B_80_E6_85_8B;
    };
    document.getElementById("gamebutton_volume_off").addEventListener("click", gamebutton_volume_off_onclick, true);
    async function gamebutton_mic_off_onclick(event) {
        if (Recognition_state()) {
            Recognition_switch(0);
            icon_google("button", 'mic_off', 'mic_off');
            button_set('mic_off', "color", '#ffffff');
        } else {
            Recognition_switch(1);
            icon_google("button", 'mic_off', 'mic');
            button_set('mic_off', "color", '#3366ff');
        }
    };
    document.getElementById("gamebutton_mic_off").addEventListener("click", gamebutton_mic_off_onclick, true);
    async function gamebutton_wechat_onclick(event) {
        _E9_80_81_E5_87_BA_E5_B0_8D_E8_A9_B1();
    };
    document.getElementById("gamebutton_wechat").addEventListener("click", gamebutton_wechat_onclick, true);
    setInterval(async function() {
        if ((Recognition_state()) == false) {
            icon_google("button", 'mic_off', 'mic_off');
            button_set('mic_off', "color", '#ffffff');
        }
    }, 2000);
};
main();
</script>
</body></html>